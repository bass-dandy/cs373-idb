<div id="fixed-width-container" ng-controller="artistController">
    <div class="section-head parallax">
        <img class="parallax-bg" data-speed="0.2" ng-src="{{ artist.releases[artIdx].large_image }}"/>
        <div class="parallax-fg">{{ ::artist.name }}</div>
    </div>
    <div class="section">
        
        <!-- Artist Info -->
        <div class="overview">
            <img ng-show="artist.medium_image" ng-src="{{ ::artist.medium_image }}"/>
            <img ng-hide="artist.medium_image" src="../images/placeholder.png"/>
            <div>
                <strong class="subsection text-uppercase">Label</strong>
                <a href="http://downing.club/labels/{{ ::artist.label.id }}">{{ ::artist.label.name }}</a>
            </div>
        </div>

        <!-- Bio, releases, etc -->
        <div class="panel margin-top">

            <!-- Selector links -->
            <div id="artist_selector">
                <div class="selected">Releases</div>
            </div>

            <!-- Selector content -->
            <div class="padded text-center">
                <a class="artist-release-link" ng-href="http://downing.club/releases/{{ release.id }}" ng-repeat="release in artist.releases | orderBy:'name'">
                    <div class="artist_release">
                        <img src="{{ ::release.large_image }}">
                        <i>{{ ::release.name }}</i>
                    </div>
                </a>
            </div>
        </div>
    </div>
    <!-- Events -->
    <div class="section-head parallax">
        <img class="parallax-bg" data-speed="0.2" ng-src="{{ artist.releases[artIdx].large_image }}"/>
        <div class="parallax-fg">Upcoming Concerts</div>
    </div>
    <div class="section">
        <div class="panel">
            <div class="event" ng-repeat="event in artist.events">
                <div class="calendar">
                    <div>{{ ::event.date.month }}</div>
                    {{ ::event.date.day }}
                </div>
                <div class="event_info">
                    <b>{{ ::event.name }}</b><br>
                    {{ ::event.location }}
                </div>
            </div>
            <div class="padded text-center" ng-hide="artist.events.length">We're not aware of any upcoming events.</div>
        </div>
    </div>
    <!-- Discussion -->
    <div class="section-head parallax">
        <img class="parallax-bg" data-speed="0.2" ng-src="{{ artist.releases[artIdx].large_image }}"/>
        <div class="parallax-fg">Discussion</div>
    </div>
    <div class="section">
        <div class="panel padded text-center">

            <!-- Main comment submission form -->
            <div class="discussion-form">
                <textarea placeholder="Write a comment..." ng-model="submission"></textarea>
                <button class="mecca-button" ng-click="postComment()">Post Comment</button>
            </div>
            <div class="thread" ng-repeat="comment in artist.discussion | orderBy:'-id'">

                <!-- Main comment -->
                <div class="comment">
                    <div ng-bind-html="parseHashtags(comment.discussion)"></div>
                    <a class="reply-link" href="" ng-click="focus = true" ng-show="!focus">reply</a>
                </div>

                <!-- Reply submission form -->
                <div class="discussion-form" ng-show="focus">
                    <textarea placeholder="Write a reply..." ng-model="submission_reply" ng-blur="focus = false"></textarea>
                    <button class="mecca-button" ng-click="postReply(submission_reply, comment.id)">Post Reply</button>
                </div>
                <div class="reply" ng-repeat="reply in comment.reply" ng-bind-html="parseHashtags(reply.reply)"></div>
            </div>
        </div>
    </div>
</div>
